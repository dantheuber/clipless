<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Clipless Settings</title>
    <link rel="stylesheet" href="./settings.css" />
  </head>
  <body>
    <div class="settings-container">
      <div class="settings-header">
        <h1 class="settings-title">Settings</h1>
        <button class="close-button" id="closeButton">Close</button>
      </div>
      
      <div class="settings-content">
        <div class="settings-section">
          <h2 class="section-title">General</h2>
          <div class="setting-item">
            <div>
              <div class="setting-label">Start with Windows</div>
              <div class="setting-description">Launch Clipless when Windows starts</div>
            </div>
            <div class="setting-control">
              <div class="toggle-switch" id="startWithWindows">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
          <div class="setting-item">
            <div>
              <div class="setting-label">Minimize to Tray</div>
              <div class="setting-description">Hide window to system tray when closed</div>
            </div>
            <div class="setting-control">
              <div class="toggle-switch active" id="minimizeToTray">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="settings-section">
          <h2 class="section-title">Clipboard</h2>
          <div class="setting-item">
            <div>
              <div class="setting-label">Monitor Clipboard</div>
              <div class="setting-description">Automatically capture clipboard changes</div>
            </div>
            <div class="setting-control">
              <div class="toggle-switch active" id="monitorClipboard">
                <div class="toggle-slider"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="placeholder-text">
          Settings functionality will be implemented here.<br>
          This is a boilerplate settings window with communication pattern.
        </div>
      </div>
    </div>

    <script>
      // Settings communication with main process
      const { ipcRenderer } = require('electron');

      // Close button handler
      document.getElementById('closeButton').addEventListener('click', () => {
        ipcRenderer.invoke('close-settings');
      });

      // Toggle switch functionality
      document.querySelectorAll('.toggle-switch').forEach(toggle => {
        toggle.addEventListener('click', () => {
          toggle.classList.toggle('active');
          
          // Get the setting ID and current state
          const settingId = toggle.id;
          const isActive = toggle.classList.contains('active');
          
          // Send setting change to main process
          const settings = {
            [settingId]: isActive
          };
          
          ipcRenderer.invoke('settings-changed', settings);
        });
      });

      // Load initial settings
      ipcRenderer.invoke('get-settings').then(settings => {
        // Apply initial settings to UI
        Object.keys(settings).forEach(key => {
          const toggle = document.getElementById(key);
          if (toggle && settings[key]) {
            toggle.classList.add('active');
          }
        });
      });
    </script>
  </body>
</html>
